---
import MainLayout from "../../layout/MainLayout.astro";

export async function getStaticPaths() {
    const url = "https://ddfghjewycntqcnvdpwb.supabase.co/rest/v1/Item";
    const options = {
        headers: {
            apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkZmdoamV3eWNudHFjbnZkcHdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODQ3NDE2MTEsImV4cCI6MjAwMDMxNzYxMX0.QDdzYHa06Ihu_Ai3vPFMaU6XKWgtNmejT-bbgcZ2Z4A"
        },
    };
    const response = await fetch(url, options);
    const data = await response.json();

    return data.map((item) => ({
        params: { slug: item.slug },
        props: { item },
    }));
}

const { item } = Astro.props;
---
<MainLayout title={item.Name}>
    <main>
        <div class="space" />
        <button onclick="history.back()" class="back margin">&#8592;  Back</button>
        <section class="margin">
            <img src={item.Image} alt="Model med Ruda Patrice produkt">
            <div>
                <h1>{item.Name}</h1>
                <p id="price">DKK {item.Price}</p>
                <div id="wrapper_size">
                    <label for="sizes">SIZE:</label>
                    <select name="sizes" id="sizes">
                        <option value="">SELECT SIZE</option>
                        <option value="extra small">EXTRA SMALL</option>
                        <option value="small">SMALL</option>
                        <option value="medium">MEDIUM</option>
                        <option value="large">LARGE</option>
                        <option value="extra large">EXTRA LARGE</option>
                    </select>
                </div>
                <button class="atc">Add To Cart</button>
                <p id="description">{item.Description}</p>
            </div>
        </section>
    </main>
</MainLayout>

<style>
     .space {
       height: 70px;
   }

   .back {
        background-color: transparent;
        background-color: transparent;
        border: 1px solid black;
        border-radius: 0px;
        padding: 10px;
        margin-bottom: 20px;
        font-size: 1rem;
        color: black;
        place-self: flex-start;
   }

   section {
    display: flex;
    flex-direction: column;
   }

   img {
        height: max-content;
       max-height: 600px;
   }

   h1 {
       font-size: 2rem;
       margin-bottom: 20px;
   }

    #price {
         font-size: 1.5rem;
         font-weight: 700;
         margin-bottom: 20px;
    }

    #wrapper_size {
        display: flex;
        flex-direction: column;
        margin-bottom: 20px;
    }

    select {
        background-color: transparent;
        border: 1px solid black;
        border-radius: 0px;
        padding: 10px;
        font-size: 1rem;
    }

    .atc {
        width: 100%;
        background-color: transparent;
        border: 1px solid black;
        border-radius: 0px;
        padding: 10px;
        margin-bottom: 40px;
        font-size: 1rem;
        color: black;
    }

    button:hover {
        background-color: black;
        color: white;
    }

    #description {
        font-size: 1rem;
        font-weight: 700;
        line-height: 1.5rem;
    }

   @media (min-width: 600px) {
    .space {
            height: 140px;
        }

    main {
        display: flex;
        flex-direction: column;
        align-items: center;

        max-width: 1200px;
    }

    section {
        flex-direction: row;
        justify-content: space-between;
        gap: 50px;
    }
   }
</style>